<!DOCTYPE html>
<html>
<head>
	<title>Grunt Generator</title>
	<link rel="stylesheet" href="http://bootswatch.com/flatly/bootstrap.min.css">
	<link rel="stylesheet" href="css/autocomplete.css">
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.17/angular.min.js"></script>
	<script src="js/autocomplete.js"></script>
	<script src="js/filesaver.js"></script>
	<script src="js/gruntfile-gen.js"></script>
</head>
<body ng-app="gruntfile-gen">
	<div class="container" ng-controller="PackageCtrl">
		<h1>Grunt Generator</h1>

		<div class="col-md-7">
			<form role="form">
				<div class="form-group">
					<autocomplete type="text" on-select="addPackage" ng-model="selectedPackage" attr-placeholder="Add package..." data="names" attr-input-class="form-control" />
				</div>
			</form>

			<div class="panel panel-default" ng-repeat="(name, package) in selectedPackages">
				<div class="panel-heading">
					<h1 class="panel-title"><a href="{{ package.url }}" target="_blank">{{ name }}</a><span ng-click="removePackage(name)" class="glyphicon glyphicon-remove pull-right"></span></h1>
				</div>
				<div class="panel-body">
					<form class="form-horizontal" role="form">
						<div class="form-group" ng-repeat="option in package.options">
							<label class="col-sm-3 control-label" title="{{ option.description }}">{{ option.name }}</label>
							<div class="col-sm-9">
								<input type="text" class="form-control" ng-model="option.value" value="{{ option.value }}" placeholder="{{ option.placeholder }}" />
							</div>
						</div>
					</form>
				</div>
			</div>
		</div>

		<div class="col-md-5">
<h2>package.json<span ng-click="savePackage()" class="glyphicon glyphicon-save pull-right"></span></h2>
<pre id="package" style="font-size:0.75em;">
{
    'name' : 'MySite',
    'title' : 'MySite',
    'version' : '0.0.0',
    'devDependencies': {
    	<span ng-repeat="(name, package) in selectedPackages">'{{ name }}': '{{ package.options.version.value }}',
    	</span>
    }
}
</pre>

<h2>Gruntfile.js<span ng-click="saveGruntfile()" class="glyphicon glyphicon-save pull-right"></span></h2>
<pre id="gruntfile" style="font-size:0.75em;">
module.exports = function(grunt) {
	grunt.initConfig({
		pkg: grunt.file.readJSON('package.json'),
		<span ng-repeat="package in selectedPackages">
		{{ package.task }}: {
			{{ makeTemplate(package) }}
		}
		</span>
	});
	<span ng-repeat="(name, package) in selectedPackages">grunt.loadNpmTasks('{{ name }}');
	</span>
	grunt.registerTask('default', ['<span ng-repeat="package in selectedPackages">{{ package.task }}</span>', ]);
};
</pre>
		</div>

	</div>
</body>
</html>